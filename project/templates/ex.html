<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lagos State Charting Database</title>
    <!-- Link to the CSS file in the static folder -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/index.css') }}">
</head>
<body>
    <nav>
        <div class="nav-left">
            <!-- Reference the logo image in the static folder -->
            <img src="{{ url_for('static', filename='images/OSSG1.png') }}" alt="DCTR Logo" class="logo">
            <span class="brand">D(SCTR)</span>
        </div>
        <div class="nav-center">
            <a href="#" class="active">Main</a>
            <a href="#">About</a>
            <a href="#">Payment</a>
            <a href="#">Contact</a>
        </div>
        <div class="nav-right">
            <!-- Reference the user icon image in the static folder -->
            <a href="#" class="login-btn">Login</a>
            <img src="{{ url_for('static', filename='images/user.png') }}" alt="User" class="user-icon">
        </div>
    </nav>

    <main>
        <div class="content">
            <h1>Welcome to Lagos State<br>Charting Database</h1>
            <p class="subtitle">We've made it easy to check the status of your land.<br>Just enter the coordinates here.</p>
            
            <div class="coordinate-inputs">
                <div class="input-group">
                    <label for="latitude">Latitude/Easting</label>
                    <input type="text" id="latitude">
                </div>
                <div class="input-group">
                    <label for="longitude">Longitude/Northing</label>
                    <input type="text" id="longitude">
                </div>
            </div>

            <button class="status-btn" onclick="getStatus()">Get Status</button>
        </div>
    </main>

    <script>
        async function getStatus() {
            const latitude = document.getElementById('latitude').value.trim();
            const longitude = document.getElementById('longitude').value.trim();

            if (!latitude || !longitude) {
                alert("Please fill in both fields.");
                return;
            }

            const type = (latitude >= -90 && latitude <= 90 && longitude >= -180 && longitude <= 180)
                ? 'LL' : 'EN';

            try {
                const response = await fetch('/get_status', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({ type: type, x: latitude, y: longitude }),
                });

                if (response.ok) {
                    const result = await response.json();
                    alert(`Status: ${result.status}\nDetails: ${JSON.stringify(result.details || 'N/A')}`);
                } else {
                    const error = await response.json();
                    alert(`Error: ${error.error}`);
                }
            } catch (err) {
                alert(`An error occurred: ${err.message}`);
            }
        }
    </script>
</body>
</html>
